--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _D4Pj4C3lEeSwhO5Nwx0hPg,_Iu0EsS36EeSYRYqCbC6LMQ
Element-Name: Preview_Categorization
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _5m3g0DNtEeSiS7b7ptZeHw
Runtime-Version: 1.5.4.201412181238
Save-Time: 9/15/15 10:30 AM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

get-view "Project Explorer" | get-tree | select "org.eclipse.emf.ecp.makeithappen.model.viewmodel/viewmodels/User.view" 
    | select "org.eclipse.emf.ecp.makeithappen.model.viewmodel/viewmodels/User.view" | double-click
get-editor "User.view" | get-tree | select View | get-menu "Generate Controls" | click
with [get-window -class SelectAttributesDialog] {
get-tree | select User
    get-button "Next >" | click
    with [get-table] {
        get-item "firstName : EString" | check
        get-item "lastName : EString" | check
        get-item "gender : Gender" | check
        get-item "active : EBoolean" | check
    }
    get-button Finish | click
}

get-view "EMF Forms Preview" | get-button "Automatically refresh Preview View" | click
with [get-editor "User.view" | get-tree] {
    select View | get-menu Categorization | click
    select "View/Categorization" | select "View/Categorization" | get-menu "Leaf Category" | click
    select "View/Categorization" | get-menu "Leaf Category" | click
    select "View/Control firstName" | select "View/Control firstName"
    get-item "View/Control firstName" | drag-start "-2" 4
    get-item "View/Control lastName" | drag-enter 23 7 -detail move
    get-item "View/Control lastName" | drag-over 31 16 -detail move
    get-item "View/Control gender" | drag-over 41 16 -detail move
    get-item "View/Control active" | drag-over 46 17 -detail move
    get-item "View/Categorization" | drag-over 39 17 -detail move
    get-item "View/Categorization/Leaf Category" | drag-over 17 5 -detail move
    get-item "View/Control lastName" | drag-exit
    get-item "View/Categorization/Leaf Category" | drag-accept 17 5 -detail move
    drag-set-data
    get-item "View/Categorization/Leaf Category" | drop 17 5 -detail move
    drag-end -detail move
    select "View/Control lastName"
    get-item "View/Control lastName" | drag-start 19 7
    get-item "View/Control gender" | drag-enter 47 2 -detail move
    get-item "View/Categorization/Leaf Category" | drag-over 54 17
    get-item "View/Categorization/Leaf Category/Control firstName" | drag-over 33 17
    get-item "View/Categorization" | get-item "Leaf Category" -index 1 | drag-over 45 10 -detail move
    get-item "View/Control gender" | drag-exit
    get-item "View/Categorization" | get-item "Leaf Category" -index 1 | drag-accept 45 10 -detail move
    drag-set-data
    get-item "View/Categorization" | get-item "Leaf Category" -index 1 | drop 45 10 -detail move
    drag-end -detail move
}
get-button "Save All (M1+M2+S)" | click
with [get-editor "User.view"] {
    get-tree | select "View/Categorization/Leaf Category"
    get-editbox -after [get-label Name] | set-text leaf1
    get-tree | select [get-item "View/Categorization" | get-item "Leaf Category" -index 0]
    get-editbox -after [get-label Name] | set-text leaf2
    get-tree | select "View/Categorization"
}
with [get-view "EMF Forms Preview" | get-tree] {
    get-property "getItems().getClassName()" | equals "org.eclipse.swt.widgets.TreeItem[]" | verify-true
    get-property "getItems().TreeItem[0].getText()" | equals leaf1 | verify-true
    get-property "getItems().TreeItem[1].getText()" | equals leaf2 | verify-true
}
get-view "EMF Forms Preview" | get-tree | select leaf1
with [get-view "EMF Forms Preview" | get-control Any -after [get-label Active] -index 10] {
    get-property "getChildren().Control[0].getClassName()" | equals "org.eclipse.swt.widgets.Label" | verify-true
    get-property "getChildren().Control[0].getText()" | equals "First Name" | verify-true
    get-property "getChildren().Control[1].getClassName()" | equals "org.eclipse.swt.widgets.Label" | verify-true
    get-property "getChildren().Control[1].getText()" | equals "" | verify-true
    get-property "getChildren().Control[2].getMessage()" | equals "First Name" | verify-true
    get-property "getChildren().Control[2].getText()" | equals "" | verify-true
}
get-view "EMF Forms Preview" | get-tree | select leaf2
with [get-view "EMF Forms Preview" | get-control Any -after [get-label Active] -index 10] {
    get-property "getChildren().length" | equals 3 | verify-true
    get-property "getChildren().Control[0].getClassName()" | equals "org.eclipse.swt.widgets.Label" | verify-true
    get-property "getChildren().Control[0].getText()" | equals "Last Name*" | verify-true
    get-property "getChildren().Control[1].getClassName()" | equals "org.eclipse.swt.widgets.Label" | verify-true
    get-property "getChildren().Control[1].getText()" | equals "" | verify-true
    get-property "getChildren().Control[2].getClassName()" | equals "org.eclipse.swt.widgets.Text" | verify-true
    get-property "getChildren().Control[2].getMessage()" | equals "Last Name" | verify-true
}
with [get-editor "User.view"] {
    with [get-tree] {
        select "View/Categorization/leaf1" | select "View/Categorization" | select "View/Categorization" 
            | get-menu "Composite Category" | click
        select "View/Categorization/leaf2"
        get-item "View/Categorization/leaf2" | drag-start "-3" 5
        get-item "View/Categorization/leaf2" | drag-enter 4 11 -detail move
        get-item "View/Categorization/leaf2" | drag-over 6 17
        get-item "View/Categorization/leaf2/Control lastName" | drag-over "-12" 17
        get-item "View/Categorization/Composite Category" | drag-over 5 12 -detail move
        get-item "View/Categorization/leaf2" | drag-exit
        get-item "View/Categorization/Composite Category" | drag-accept 5 12 -detail move
        drag-set-data
        get-item "View/Categorization/Composite Category" | drop 5 12 -detail move
        drag-end -detail move
        select "View/Categorization" | select "View/Categorization" | get-menu "Composite Category" | click
        select [get-item "View/Categorization" | get-item "Composite Category" -index 1]
        get-item "View/Categorization" | get-item "Composite Category" -index 1 | drag-start 27 9
        get-item "View/Categorization/Composite Category/leaf2" | drag-enter 17 11 -detail move
        get-item "View/Categorization/Composite Category" | drag-over 45 11 -detail move
        get-item "View/Categorization/Composite Category/leaf2" | drag-exit
        get-item "View/Categorization/Composite Category" | drag-accept 45 11 -detail move
        drag-set-data
        get-item "View/Categorization/Composite Category" | drop 45 11 -detail move
        drag-end -detail move
        select "View/Categorization/Composite Category/Composite Category" | get-menu "Leaf Category" | click
        select "View/Categorization/Composite Category/Composite Category" | get-menu "Leaf Category" | click
        select "View/Control active"
        get-item "View/Control active" | drag-start 19 7
        get-item "View/Control active" | drag-enter 38 17 -detail move
        get-item "View/Control active" | drag-over 38 17
        get-item "View/Categorization" | drag-over 61 15 -detail move
        get-item "View/Categorization/leaf1" | drag-over 56 17
        get-item "View/Categorization/Composite Category/leaf2" | drag-over 42 16
        get-item "View/Categorization/Composite Category/Composite Category" | drag-over 52 17
        get-item "View/Categorization/Composite Category/Composite Category/Leaf Category" | drag-over 25 5 -detail move
        get-item "View/Control active" | drag-exit
        get-item "View/Categorization/Composite Category/Composite Category/Leaf Category" | drag-accept 25 5 
            -detail move
        drag-set-data
        get-item "View/Categorization/Composite Category/Composite Category/Leaf Category" | drop 25 5 -detail move
        drag-end -detail move
        select "View/Control gender"
        get-item "View/Control gender" | drag-start 11 5
        get-item "View/Categorization" | drag-enter 43 11 -detail move
        get-item "View/Categorization/Composite Category/Composite Category/Leaf Category" | drag-over 16 17
        get-item "View/Categorization/Composite Category/Composite Category/Leaf Category/Control active" 
            | drag-over "-4" 17
        get-item "View/Categorization/Composite Category/Composite Category" | get-item "Leaf Category" -index 1 
            | drag-over 15 4 -detail move
        get-item "View/Categorization" | drag-exit
        get-item "View/Categorization/Composite Category/Composite Category" | get-item "Leaf Category" -index 1 
            | drag-accept 15 4 -detail move
        drag-set-data
        get-item "View/Categorization/Composite Category/Composite Category" | get-item "Leaf Category" -index 1 
            | drop 15 4 -detail move
        drag-end -detail move
        select "View/Categorization/Composite Category/Composite Category/Leaf Category"
    }
    get-editbox -after [get-label Name] | set-text leaf3
    get-tree | select View | select "View/Categorization/Composite Category/Composite Category/Leaf Category"
    get-editbox -after [get-label Name] | set-text leaf4
    get-tree | select View | select "View/Categorization/Composite Category"
    get-editbox -after [get-label Name] | set-text cc1
    get-tree | select View | select "View/Categorization/cc1/Composite Category"
    get-editbox -after [get-label Name] | set-text cc2
    get-tree | select View | select "View/Categorization"
    get-editbox -after [get-label "Main Category Depth"] | set-text 2
    get-tree | select "View/Categorization"
}
with [get-view "EMF Forms Preview"] {
    get-button "Automatically refresh Preview View" | click
    get-button "Refresh Preview View" | click
}
with [get-view "EMF Forms Preview"] {
    with [get-tab-folder] {
        get-property "pages[0]" | equals leaf1 | verify-true
        get-property "pages[1]" | equals cc1 | verify-true
        get-property activePage | equals leaf1 | verify-true
        get-property tabCount | equals 2 | verify-true
    }
    with [get-control Any -after [get-label "View Editor Preview"] -index 14] {
        get-property "getChildren().length" | equals 3 | verify-true
        get-property "getChildren().Control[0].getClassName()" | equals "org.eclipse.swt.widgets.Label" | verify-true
        get-property "getChildren().Control[0].getText()" | equals "First Name" | verify-true
    }
}
get-view "EMF Forms Preview" | get-tab-folder | get-tab-item cc1 | click
with [get-view "EMF Forms Preview" | get-tab-folder] {
    get-property "pages[0]" | equals leaf1 | verify-true
    get-property "pages[1]" | equals cc1 | verify-true
    get-property activePage | equals cc1 | verify-true
    get-property tabCount | equals 2 | verify-true
    get-property "getItems().CTabItem[0].getControl().getChildren().Control[0].getChildren().Control[0].getText()" | equals "First Name" 
        | verify-true
    get-property "getItems().CTabItem[1].getControl().getChildren().Control[0].getChildren().Control[0].getClassName()" 
        | equals "org.eclipse.swt.widgets.ToolBar" | verify-true
}
with [get-view "EMF Forms Preview"] {
    get-tab-folder | get-tab-item cc1 | click
    with [get-tab-folder -after [get-label "View Editor Preview"] -index 1] {
        get-tab-item leaf2 | click
        get-tab-item cc2 | click
        get-tab-item leaf2 | click
        get-tab-item cc2 | click
    }
}
with [get-view "EMF Forms Preview" | get-tree] {
    get-property "getItems().length" | equals 2 | verify-true
    get-property "getItems().TreeItem[0].getText()" | equals leaf3 | verify-true
    get-property "getItems().TreeItem[1].getText()" | equals leaf4 | verify-true
}
get-view "EMF Forms Preview" | get-tree | select leaf3
with [get-view "EMF Forms Preview" | get-control Any -after [get-label "View Editor Preview"] -index 26] {
    get-property "getChildren().length" | equals 3 | verify-true
    get-property "getChildren().Control[0].getText()" | equals Active | verify-true
}
get-view "EMF Forms Preview" | get-tree | select leaf4
with [get-view "EMF Forms Preview" | get-control Any -after [get-label "View Editor Preview"] -index 26] {
    get-property "getChildren().length" | equals 3 | verify-true
    get-property "getChildren().Control[0].getText()" | equals Gender | verify-true
    get-property "getChildren().Control[2].getItemCount()" | equals 2 | verify-true
    get-property "getChildren().Control[2].getText()" | equals Male | verify-true
}
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
